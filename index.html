<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <body>
    <title>Cancer Bar charts</title>
    <style>
      .d3-tip {
      line-height: 1;
      padding: 12px;
      background: rgba(245, 245, 245, 0.90) !important;
      color: #000;
      border-radius: 2px;
      font-size: 13px;
      margin-top: 0px;
      margin-left: -100px;
      }
       .d3-tipTwo {
      line-height: 1;
      padding: 12px;
      background: rgba(245, 245, 245, 0.90) !important;
      color: #000;
      border-radius: 2px;
      font-size: 13px;
      margin-left: -100px;
      margin-top: 350px;
      }
       .d3-tipThree {
      line-height: 1;
      padding: 12px;
      background: rgba(245, 245, 245, 0.90) !important;
      color: #000;
      border-radius: 2px;
      font-size: 13px;
      margin-left: -100px;
      margin-top: 700px;
      }
      .bar rect {
      fill: steelblue;
      shape-rendering: crispEdges;
      }
      .bar rect:hover{
      fill: rgba(0,0,0,.8);
      }
      .axis path, .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
      }
      text{
        font-size: 16px;
      }
        #tiptable tr{
    margin-bottom: 1px;
    padding-left: 5px;
    padding-right: 5px;
    border-bottom: 1px solid #777;
  }
    #tiptable tr td{
    background: #fff;
    margin-bottom: 1px;
    margin-right: 1px;
    border-right: 1px solid #ccc;
  }
  h3{
    text-align: center;
    width: 600px;
    padding: 0px;
    margin: 0px;
    font-size: 16px;
  }
    .d3-tooltip{
    background: #ccc;
    border-radius: 5px;
    padding: 8px;
    border: .6px solid black;
  }
  .charts{
    width: 600px;
  }
  #column1, #column3, #column5{
    border: 2px solid #777;
    margin-bottom: 10px;
  }
    </style>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="./js/d3.tip.v0.6.3.js"></script>
    <script>
    var termsData;
    var allTermsList = [""];
    var allTermsListSplit;
    var termsWithFrequency;
    var colOneVal;
    var colThreeVal;
    var colFiveVal;
    var finalHighVal=0;

        var lineColor = d3.scale.linear()
                      .domain([0,100])
                      .range(['#00f', '#f00'])

        var tip1 = d3.tip()
      .attr('class', 'd3-tip d3-tooltip')
      .direction('e')
      .offset([0, 20])
      .html(function(d) {
         return '<table id="tiptable" cellpadding="1" cellspacing="1" align="center">' + '<tr align="center" style="padding:5px;"><td style="padding:5px;"> <b>chr</td><td style="padding:5px; width:25px;"> <b>start</td><td style="padding:5px;"> <b>end</b> </td><td style="padding:5px;"> <b>strand</b> </td><td style="padding:5px;"> <b>symbol</b> </td><td style="padding:5px;"> <b>length</b> </td><td style="padding:5px;"> <b>P53KO-O1</b> </td><td style="padding:5px;"> <b>p53KO-O-CAS1</b> </td><td style="padding:5px;"> <b>p53KO-O-RAS1</b> </td></tr>' + d + "</table>";
    });

          var tip2 = d3.tip()
      .attr('class', 'd3-tipTwo d3-tooltip')
      .direction('e')
      .offset([0, 20])
      .html(function(d) {
         return '<table id="tiptable" cellpadding="1" cellspacing="1" align="center">' + '<tr align="center" style="padding:5px;"><td style="padding:5px;"> <b>chr</td><td style="padding:5px; width:25px;"> <b>start</td><td style="padding:5px;"> <b>end</b> </td><td style="padding:5px;"> <b>strand</b> </td><td style="padding:5px;"> <b>symbol</b> </td><td style="padding:5px;"> <b>length</b> </td><td style="padding:5px;"> <b>P53KO-O1</b> </td><td style="padding:5px;"> <b>p53KO-O-CAS1</b> </td><td style="padding:5px;"> <b>p53KO-O-RAS1</b> </td></tr>' + d + "</table>";
    });

          var tip3 = d3.tip()
      .attr('class', 'd3-tipThree d3-tooltip')
      .direction('e')
      .offset([0, 20])
      .html(function(d) {
         return '<table id="tiptable" cellpadding="1" cellspacing="1" align="center">' + '<tr align="center" style="padding:5px;"><td style="padding:5px;"> <b>chr</td><td style="padding:5px; width:25px;"> <b>start</td><td style="padding:5px;"> <b>end</b> </td><td style="padding:5px;"> <b>strand</b> </td><td style="padding:5px;"> <b>symbol</b> </td><td style="padding:5px;"> <b>length</b> </td><td style="padding:5px;"> <b>P53KO-O1</b> </td><td style="padding:5px;"> <b>p53KO-O-CAS1</b> </td><td style="padding:5px;"> <b>p53KO-O-RAS1</b> </td></tr>' + d + "</table>";
    });

function columnOneBarchart(data) {
 // console.log(data);
 var allData =data;
  var minVal = (d3.min(data, function(d) { return d.colOne; }));
  var maxVal = (d3.max(data, function(d) { return d.colOne; }));
  console.log(maxVal);
  var width =  600;
  var height = 150;
 colOneVal = d3.extent(data.map(function (d) {
        return (d.colOne);
   }))
  colThreeVal = d3.extent(data.map(function (d) {
        return (d.colFive);
   }))
  if(colThreeVal[1]>colOneVal)
    finalHighVal = colThreeVal[1];

 colFiveVal = d3.extent(data.map(function (d) {
        return (d.colFive);
   }))
 if(colFiveVal[1]>finalHighVal)
    finalHighVal = colFiveVal[1];

lineColor.domain([0, finalHighVal]);

    var x = d3.scale.linear()
      .domain([0,1])
      .range([0, width]);
    
    var y = d3.scale.linear()
      .domain([0, finalHighVal])
      .range([height, 0]);

    var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom")
      .ticks(0)

    var yAxis = d3.svg.axis()
      .scale(y)
      .ticks(5)
      .orient("left");


    // put the graph in the "twitterViz" div
    var svg = d3.select("#column1").append("svg")
      .attr("width", width)
      .attr("height", height + 30)
      .append("g")
      .attr("transform", "translate(" + 70 + "," + 10 + ")");
var attrX = 1;
    svg.call(tip1);
    // set up the bars
    var bar = svg.selectAll(".bar")
      .data(data)
      .enter().append("rect")
      .attr("id", function(d, i){
          return "colOne"+(i+1);
      })
      .attr("x", function(d,i){
        return attrX+(i/2);
      })
      .attr("width", 2)
      .attr("y", function(d){
        return y(d.colOne);
      })
      .attr("height", function(d) { return height - y(d.colOne); })
      .attr("fill", function(d){
                    return lineColor(d.colOne);
                })
      .on('mouseover', function(d){
        var tipContent = "";
        tipContent = tipContent + '<tr><td align="left" style="padding:5px;">' + d.chr + "</td>" + '<td align="left" style="padding:5px; width:25px;">' +d.start + '</td><td align="left" style="padding:5px;">' +d.end + '</td><td align="left" style="padding:5px;">' + d.strand +'</td><td align="left" style="padding:5px;">' +d.symbol +'</td><td align="left" style="padding:5px;">' +d.length + '</td><td align="left" style="padding:5px;">' + d.colOne + '</td><td align="left" style="padding:5px;">' +d.colThree  + '</td><td align="left" style="padding:5px;">' +d.colFive  + "</td></tr>";

          tip1.show(tipContent, this);
          // tip2.show(tipContent, this);
          // tip3.show(tipContent, this);
          console.log(d)
          selectId = "#colOne" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
 
          selectId = "#colThree" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
          
          selectId = "#colFive" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
      })
      .on('mouseout', function(d){
        tip1.hide();
        // tip2.hide();
        // tip3.hide();
       selectId = "#colOne" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colOne);
          })

          selectId = "#colThree" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colThree);
          })

          selectId = "#colFive" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colFive);
          })
      })
    // add the x axis and x-label
    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")  
      .attr("x", "-50")
      .attr("transform", "rotate(-90)");
    svg.append("text")
      .attr("class", "xlabel")
      .attr("text-anchor", "middle")
      .attr("x", width / 2)
      .attr("y", 600)
      .text("");
    // add the y axis and y-label
    svg.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(0,0)")
      .call(yAxis);
    svg.append("text")
      .attr("class", "ylabel")
      .attr("y", 10) // x and y switched due to rotation
      .attr("x", 0 - (height / 2))
      .attr("dy", "1em")
      .attr("transform", "rotate(-90)")
      .style("text-anchor", "middle")
      .text("Value");
}

function columnThreeBarchart(data) {
 // console.log(data);

 
  var width =  600;
  var height = 150;
lineColor.domain([0, finalHighVal]);

    var x = d3.scale.linear()
      .domain([0,1])
      .range([0, width]);
    
    var y = d3.scale.linear()
      .domain([0, finalHighVal])
      .range([height, 0]);

    var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom")
      .ticks(0)

    var yAxis = d3.svg.axis()
      .scale(y)
      .ticks(5)
      .orient("left");

   
    // put the graph in the "twitterViz" div
    var svg = d3.select("#column3").append("svg")
      .attr("width", width)
      .attr("height", height+30)
      .append("g")
      .attr("transform", "translate(" + 70 + "," + 10 + ")");
var attrX = 1;
    svg.call(tip2);
    // set up the bars
    var bar = svg.selectAll(".bar")
      .data(data)
      .enter().append("rect")
      .attr("id", function(d, i){
          return "colThree"+(i+1);
      })
      .attr("x", function(d,i){
        return attrX+ (i/2);
      })
      .attr("width", 2)
      .attr("y", function(d){
        return y(d.colThree);
      })
      .attr("height", function(d) { return height - y(d.colThree); })
        .attr("fill", function(d){
                    return lineColor(d.colThree);
                })
      .on('mouseover', function(d){
        var tipContent = "";
        tipContent = tipContent + '<tr><td align="left" style="padding:5px;">' + d.chr + "</td>" + '<td align="left" style="padding:5px; width:25px;">' +d.start + '</td><td align="left" style="padding:5px;">' +d.end + '</td><td align="left" style="padding:5px;">' + d.strand +'</td><td align="left" style="padding:5px;">' +d.symbol +'</td><td align="left" style="padding:5px;">' +d.length + '</td><td align="left" style="padding:5px;">' + d.colOne + '</td><td align="left" style="padding:5px;">' +d.colThree  + '</td><td align="left" style="padding:5px;">' +d.colFive  + "</td></tr>";
          // tip1.show(tipContent, this);
          tip2.show(tipContent, this);
          // tip3.show(tipContent, this);
          console.log(d)
          selectId = "#colOne" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
 
          selectId = "#colThree" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
          
          selectId = "#colFive" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
      })
      .on('mouseout', function(d){
        // tip1.hide();
        tip2.hide();
        // tip3.hide();
       selectId = "#colOne" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colOne);
          })

          selectId = "#colThree" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colThree);
          })

          selectId = "#colFive" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colFive);
          })
      })
    // add the x axis and x-label
    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")  
      .attr("x", "-50")
      .attr("transform", "rotate(-90)");
    svg.append("text")
      .attr("class", "xlabel")
      .attr("text-anchor", "middle")
      .attr("x", width / 2)
      .attr("y", 600)
      .text("");
    // add the y axis and y-label
    svg.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(0,0)")
      .call(yAxis);
    svg.append("text")
      .attr("class", "ylabel")
      .attr("y", 10) // x and y switched due to rotation
      .attr("x", 0 - (height / 2))
      .attr("dy", "1em")
      .attr("transform", "rotate(-90)")
      .style("text-anchor", "middle")
      .text("Value");
}

function columnFiveBarchart(data) {
 // console.log(data);

 
  var width =  600;
  var height = 150;
lineColor.domain([0, finalHighVal]);

    var x = d3.scale.linear()
      .domain([0,1])
      .range([0, width]);
    
    var y = d3.scale.linear()
      .domain([0, finalHighVal])
      .range([height, 0]);

    var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom")
      .ticks(0)

    var yAxis = d3.svg.axis()
      .scale(y)
      .ticks(5)
      .orient("left");

  
    // put the graph in the "twitterViz" div
    var svg = d3.select("#column5").append("svg")
      .attr("width", width)
      .attr("height", height+30)
      .append("g")
      .attr("transform", "translate(" + 70 + "," + 10 + ")");
var attrX = 1;
    svg.call(tip3);
    // set up the bars
    var bar = svg.selectAll(".bar")
      .data(data)
      .enter().append("rect")
      .attr("id", function(d, i){
          return "colFive"+(i+1);
      })
      .attr("x", function(d,i){
        return attrX+ (i/2);
      })
      .attr("width", 2)
      .attr("y", function(d){
        return y(d.colFive);
      })
      .attr("height", function(d) { return height - y(d.colFive); })
      .attr("fill", function(d){
                    return lineColor(d.colFive);
                })
      .on('mouseover', function(d){
        var tipContent = "";
        tipContent = tipContent + '<tr><td align="left" style="padding:5px;">' + d.chr + "</td>" + '<td align="left" style="padding:5px; width:25px;">' +d.start + '</td><td align="left" style="padding:5px;">' +d.end + '</td><td align="left" style="padding:5px;">' + d.strand +'</td><td align="left" style="padding:5px;">' +d.symbol +'</td><td align="left" style="padding:5px;">' +d.length + '</td><td align="left" style="padding:5px;">' + d.colOne + '</td><td align="left" style="padding:5px;">' +d.colThree  + '</td><td align="left" style="padding:5px;">' +d.colFive  + "</td></tr>";
        
          // tip1.show(tipContent, this);
          // tip2.show(tipContent, this);
          tip3.show(tipContent, this);
          console.log(d)
          selectId = "#colOne" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
 
          selectId = "#colThree" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
          
          selectId = "#colFive" + d.id;
          d3.select(selectId)
          .attr("fill", "#ff8707");
      })
      .on('mouseout', function(d){
        // tip1.hide();
        // tip2.hide();
        tip3.hide();
       selectId = "#colOne" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colOne);
          })

          selectId = "#colThree" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colThree);
          })

          selectId = "#colFive" + d.id;
          d3.select(selectId)
          .attr("fill", function(d){
            return lineColor(d.colFive);
          })
      })
    // add the x axis and x-label
    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")  
      .attr("x", "-50")
      .attr("transform", "rotate(-90)");
    svg.append("text")
      .attr("class", "xlabel")
      .attr("text-anchor", "middle")
      .attr("x", width / 2)
      .attr("y", 600)
      .text("");
    // add the y axis and y-label
    svg.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(0,0)")
      .call(yAxis);
    svg.append("text")
      .attr("class", "ylabel")
      .attr("y", 10) // x and y switched due to rotation
      .attr("x", 0 - (height / 2))
      .attr("dy", "1em")
      .attr("transform", "rotate(-90)")
      .style("text-anchor", "middle")
      .text("Value");
}
// Read in .csv data and make graph
d3.csv("data.csv", function(error, data) {
 
  // var parseDate = d3.time.format("%Y-%m-%d");;
  // var format = d3.time.format("%Y-%m-%d");
   var i = 1;
         data.forEach(function(d) {
                   d.colOne = +d["P53KO-O1"];
                   d.colThree = +d["p53KO-O-CAS1"];
                   d.colFive = +d["p53KO-O-RAS1"];
                   d.id = i++;
       });
  console.log(data);
            
             columnOneBarchart(data);
             columnThreeBarchart(data);
             columnFiveBarchart(data);
   
}); 
    </script>
    <div class="charts">
        <div id="column1" class="graph">
          <h3>P53KO-O1</h3>
        </div>
        <div id="column3" class="graph">
          <h3>p53KO-O-CAS1</h3>
        </div>
         <div id="column5" class="graph">
            <h3>p53KO-O-RAS1</h3>
         </div>
    </div>
  </body>
</html>